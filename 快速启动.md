# å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸš€ ä¸€é”®å¯åŠ¨æ­¥éª¤

### ç»ˆç«¯ 1: å¯åŠ¨ Prefect Server

```bash
cd /root/docker-soft/dify/01-difyè¿ç»´ç›‘æ§
uv run prefect server start
```

**ä¿æŒè¿è¡Œï¼**

### ç»ˆç«¯ 2: è®¾ç½®ç¯å¢ƒå¹¶å¯åŠ¨ Worker

```bash
cd /root/docker-soft/dify/01-difyè¿ç»´ç›‘æ§

# æ–¹å¼ 1: ä½¿ç”¨è„šæœ¬ï¼ˆæ¨èï¼‰
chmod +x scripts/setup_prefect.sh
./scripts/setup_prefect.sh

# æ–¹å¼ 2: æ‰‹åŠ¨è®¾ç½®
uv run prefect config set PREFECT_API_URL=http://127.0.0.1:4200/api
uv run prefect work-pool create dify-workflow-pool --type process

# å¯åŠ¨ Worker
uv run prefect worker start --pool dify-workflow-pool
```

**ä¿æŒè¿è¡Œï¼**

### ç»ˆç«¯ 3: éƒ¨ç½²ä»»åŠ¡ï¼ˆä¿æŒè¿è¡Œï¼‰

```bash
cd /root/docker-soft/dify/01-difyè¿ç»´ç›‘æ§

# éƒ¨ç½²æ¯æ—¥æŠ¥å‘Šï¼ˆæ¯30ç§’æ‰§è¡Œä¸€æ¬¡ï¼Œç”¨äºæµ‹è¯•ï¼‰
# æ³¨æ„ï¼šserve() æ–¹æ³•ä¼šæŒç»­è¿è¡Œï¼Œéœ€è¦ä¿æŒæ­¤ç»ˆç«¯çª—å£æ‰“å¼€
uv run python deployments/daily_report.py
```

**ä¿æŒæ­¤ç»ˆç«¯çª—å£è¿è¡Œï¼** è¿™ä¼šæŒç»­è¿è¡Œå¹¶è‡ªåŠ¨å¤„ç†è°ƒåº¦ã€‚

å¦‚æœéœ€è¦éƒ¨ç½²æ¯å‘¨æŠ¥å‘Šï¼Œå¯ä»¥åœ¨**ç¬¬å››ä¸ªç»ˆç«¯çª—å£**è¿è¡Œï¼š

```bash
cd /root/docker-soft/dify/01-difyè¿ç»´ç›‘æ§
uv run python deployments/weekly_report.py
```

## âœ… éªŒè¯å®šæ—¶ä»»åŠ¡

### æ–¹æ³• 1: ä½¿ç”¨éªŒè¯è„šæœ¬ï¼ˆæœ€å¿«ï¼‰

```bash
./scripts/verify.sh
```

### æ–¹æ³• 2: è®¿é—® Prefect UI

æ‰“å¼€æµè§ˆå™¨ï¼šhttp://127.0.0.1:4200

1. ç‚¹å‡»å·¦ä¾§ **"Deployments"** - åº”è¯¥çœ‹åˆ°ä¸¤ä¸ªéƒ¨ç½²
2. ç‚¹å‡»å·¦ä¾§ **"Flow Runs"** - ç­‰å¾…30ç§’ååº”è¯¥çœ‹åˆ°æ–°çš„è¿è¡Œè®°å½•
3. ç‚¹å‡»è¿è¡Œè®°å½•æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

### æ–¹æ³• 3: å‘½ä»¤è¡ŒéªŒè¯

```bash
# æŸ¥çœ‹éƒ¨ç½²
uv run prefect deployment ls

# æŸ¥çœ‹è¿è¡Œè®°å½•
uv run prefect flow-run ls --limit 10

# æ‰‹åŠ¨è§¦å‘æµ‹è¯•
uv run prefect deployment run "fetch-workflow-logs-flow/daily-workflow-report-debug"
```

## ğŸ“Š é¢„æœŸç»“æœ

- âœ… Prefect Server è¿è¡Œåœ¨ http://127.0.0.1:4200
- âœ… Worker æ­£åœ¨è¿è¡Œå¹¶è¿æ¥åˆ° Work Pool
- âœ… 2ä¸ª Deployment å·²åˆ›å»º
- âœ… æ¯30ç§’è‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ï¼ˆæ¯æ—¥æŠ¥å‘Šï¼‰
- âœ… è¾“å‡ºæ–‡ä»¶ç”Ÿæˆåœ¨ `outputs/reports/daily/`

## ğŸ› é‡åˆ°é—®é¢˜ï¼Ÿ

æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ï¼š[å¯åŠ¨å’ŒéªŒè¯æŒ‡å—.md](./å¯åŠ¨å’ŒéªŒè¯æŒ‡å—.md)
